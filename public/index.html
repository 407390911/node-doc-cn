<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Node.js API 中文版</title>
<link rel="stylesheet" href="/public/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/public/bootstrap/css/bootstrap-theme.min.css">
<style>
#main-iframe {
  width: 100%;
  position: fixed;
  top: 50px;
  left: 0;
  right: 0;
  border: none;
  background-color: #f8f8f8;
}
</style>
</head>
<body>
  <div id="header">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <span class="navbar-brand" href="#">Node.js API 中文版</span>
      </div>
      <div class="collapse navbar-collapse navbar-ex5-collapse">
        <ul class="nav navbar-nav">
          <li><a href="/api/" target="iframe">文档首页</a></li>
          <li><a href="#" onclick="translatePage()">[翻译当前页面]</a></li>
          <li><a href="#" onclick="previewPage()">[浏览当前页面]</a></li>
          <li><a href="#" onclick="/users/list">感谢</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              关于<span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li><a href="https://github.com/leizongmin/node-doc-cn" target="_blank">项目源码</a></li>
              <li><a href="https://github.com/leizongmin/node-doc-cn/issues" target="_blank">报告问题</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </div>
  <iframe id="main-iframe" name="iframe" src="/api/"></iframe>
</body>
</html>
<script src="/public/js/jquery.js"></script>
<script src="/public/bootstrap/js/bootstrap.min.js"></script>
<script>
(function () {

  // 自动调整iframe高度
  var $w = $(window);
  var $h = $('#header');
  var $m = $('#main-iframe');
  function windowResize () {
    var h = $w.height() - $m.offset().top;
    $m.height(h);
  }
  $(window).resize(windowResize);
  windowResize();

})();

// 翻译当前页面
function translatePage () {
  var name = $('#main-iframe')[0].contentWindow.location.pathname.split('/').pop().split('.')[0];
  if (!name) name = 'index';
  open('/edit/' + name, 'iframe');
}

// 浏览当前页面
function previewPage () {
  var name = $('#main-iframe')[0].contentWindow.location.pathname.split('/').pop().split('.')[0];
  if (!name) name = 'index';
  open('/api/' + name + '.html', 'iframe');
}
</script>